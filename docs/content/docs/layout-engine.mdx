---
title: Layout Engine
description: How Takumi implements layout.
icon: Layers
---

Takumi uses [Taffy](https://github.com/DioxusLabs/taffy), a Rust implementation of the CSS Flexbox and CSS Grid specifications.

## Box Model

Every node in Takumi follows the standard CSS box model. The total size of an element is calculated based on its content, padding, border, and margin.

## Auto Sizing

The `width` and `height` parameters are optional, which means Takumi can calculate the size based on the content.

```tsx twoslash
/** @jsxImportSource react */
// ---cut-before---
import { ImageResponse } from "@takumi-rs/image-response";

export function GET() {
  return new ImageResponse(<List />, {
    width: 1200
  });
}

function List() {
  const items = Array.from({ length: Math.floor(Math.random() * 10) + 1 }, (_, i) => i);

  return (
    <div style={{ width: "100%", height: "100%" }}>
      {items.map((item) => (
        <div key={item}>Item {item}.</div>
      ))}
    </div>
  );
}
```

## Intrinsic Size for Images

By default, the image would be measured based on its intrinsic size, you can override it by setting `width` and `height` properties.

```tsx twoslash
/** @jsxImportSource react */
// ---cut-before---
import { ImageResponse } from "@takumi-rs/image-response";

export function GET() {
  return new ImageResponse(
    <img src="https://via.placeholder.com/1200x600" width={1200} height={600} />
  );
}
```

## 
